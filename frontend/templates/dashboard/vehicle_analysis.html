{% extends "base.html" %}

{% block title %}Vehicle Analysis - {{ app_name }}{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <div class="page-header d-print-none">
            <div class="container-xl">
                <div class="row g-2 align-items-center">
                    <div class="col">
                        <h2 class="page-title">
                            Vehicle Analysis Dashboard
                        </h2>
                        <div class="text-muted mt-1">Vehicle Performance and Risk Analytics</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row mt-3">
    <div class="col-12">
        <div class="card">
            <div class="card-body p-0">
                <iframe 
                    src="{{ url_for('dash.vehicle_analysis') }}" 
                    style="width: 100%; height: 800px; border: none;"
                    id="vehicle-analysis-iframe"
                ></iframe>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // Adjust iframe height to avoid scrollbars
    function adjustIframeHeight() {
        const iframe = document.getElementById('vehicle-analysis-iframe');
        iframe.onload = function() {
            try {
                const height = iframe.contentWindow.document.body.scrollHeight;
                iframe.style.height = (height + 50) + 'px';
            } catch (e) {
                console.error("Could not adjust iframe height:", e);
            }
        };
    }
    
    // Call the function on load and on resize
    window.addEventListener('load', adjustIframeHeight);
    window.addEventListener('resize', adjustIframeHeight);
</script>
{% endblock %}